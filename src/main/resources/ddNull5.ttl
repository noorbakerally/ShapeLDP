@prefix :     <http://opensensingcity.emse.fr/LDPDesignVocabulary/> .
@prefix data:     <http://opensensingcity.emse.fr/LDPDesign/data/> .
@prefix dcat: <http://www.w3.org/ns/dcat#>

data:catalogCM a :ContainerMap;
    :containerMap data:datasetsCM;
    :resourceMap data:catalogRM .

data:datasetsCM a :NullContainerMap;
    :containerMap data:datasetCM;
    :urlTemplate "datasets" .

data:datasetCM a :ContainerMap;
    :resourceMap data:datasetRM .

data:datasetRM a :ResourceMap;
    :resourceQuery "{ $parent.parent$ dcat:dataset ?res .} LIMIT 1";
    :graphQuery "CONSTRUCT { ?res ?p ?o . } WHERE {  ?res ?p ?o . FILTER (?p not in (dcat:distribution)) }";
    :dataSource data:DataSource1 .

data:catalogRM a :ResourceMap;
    :resourceQuery "{ ?res a dcat:Catalog .} LIMIT 1";
    :graphQuery "CONSTRUCT { ?res ?p ?o . } WHERE {  ?res ?p ?o . FILTER (?p not in (dcat:dataset)) }";
    :dataSource data:DataSource1 .


data:DataSource1 a :DataSource;
    :location "https://opendata.paris.fr/api/v2/catalog/exports/ttl" .